<head>
    <%= bootstrap_form_tag url: "/courses", method: :get do |f|%>
        <%= f.label "Search Catalog"%>
        <%= f.text_field :search, skip_label: true%>
        <%= f.submit "Search"%>
        <%= f.submit "Clear Search"%>
    <%end%>
</head>

<body>
    <table id="coursesTable" class="table"> 
        <thread>
            <tr id="headerRow" class="text-center"> 
                <th>Number</th> <th>Name</th> <th>Term</th> <th>Campus</th> <th>Actions</th> 
            </tr>
        </thread>
    
            <tbody> 
                <% @courses.each do |course| %>
                    <tr> 
                        <td><%= course.number %></td>
                        <td><%= course.name %></td>
                        <td><%= course.term %></td>
                        <td><%= course.campus %></td>
                        <td><%= link_to 'Show', course %></td>
                        <td><%=link_to 'Sections', course_sections_path(course)%>
                        <% if current_user.role == "admin" && not(current_user.pending_approval?) %>
                            <td><%= link_to 'Edit', edit_course_path(course) %></td>
                            <td><%= button_to 'Delete', course_path(course), method: :delete, data: {turbo_confirm: "Are you sure you want to delete this course?"} %></td>
                        <%end%>
                        </td>
                    </tr>
                <% end %>
            </tbody>
        </table>
        <% if current_user.role == "admin" && not(current_user.pending_approval?) %>
        <br /> <%= link_to 'New Course', new_course_path %>
    <%end%>
</body>

<%== pagy_bootstrap_nav(@pagy) %>
