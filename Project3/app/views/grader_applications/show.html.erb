<% if current_user.role == "admin" || current_user.role == "student" %>
    <h1>Grader Information</h1>

    <h4>First Name</h4>
    <p><%= @application.user.fname %></p>

    <h4>Last Name</h4>
    <p><%= @application.user.lname %></p>

    <h4>Email</h4>
    <p><%= @application.user.email %></p>

    <h4>Campus</h4>
    <p><%= @application.campus %></p>

    <h4>Term</h4>
    <p><%= @application.term %></p>

    <h4>Availability</h4>
    <% for day in ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday"] %>
        <em><%= day %></em>
        <table>
            <thead>
                <th>Start Time</th>  <th>End Time</th>
            </thead>
            <tbody>
                <% @application.availabilities.select{ |entry| entry.day_of_week==day }.each do |a| %>
                    <tr>
                        <td><%= a.start_time %></td>
                        <td><%= a.end_time %></td>
                    </tr>
                <% end %>
            </tbody>
        </table>
    <% end %>

    <h4>Courses</h4>
    <table id = "courseTable" class = "table"> 
        <thread>
            <tr id = "headerRow" class = "text-center">
                <th>Course Qualifications</th>
                <th>Course Preferences</th>
                <% if current_user.role == "admin" %>
                    <th>Qualified Sections in Need of Graders</th>
                <% end %>
            </tr>
        </thread>
        <tbody>
            <tr>
                <td>
                    <% @application.course_qualification.each do |cq| %>
                        <p><%= cq.course.number %></p>
                    <% end %>
                </td>
                <td>
                    <% @application.course_preference.each do |cp| %>
                        <p><%= cp.course.number %></p>
                    <% end %>
                </td>
                <% if current_user.role == "admin" %>
                    <td>
                        <% @application.course_qualification.each do |cq| %>
                            <% cq.course.sections.each do |section| %>
                                <% @application.availabilities.each do |a| %>
                                    <% if (a.day_of_week == "Monday" && section.monday) || (a.day_of_week == "Tuesday" && section.tuesday) || (a.day_of_week == "Wednesday" && section.wednesday) || (a.day_of_week == "Thursday" && section.thursday) || (a.day_of_week == "Friday" && section.friday) %>
                                        <p><%= cq.course.number %> - Section <%= section.section_number %></p>
                                    <% end %>
                                <% end %>
                            <% end %>
                        <% end %>
                    </td>
                <% end %>
            </tr>
        </tbody>
    </table>
    <br><%= link_to "Back to Grader Applications", action: :index %>
<% end %>
